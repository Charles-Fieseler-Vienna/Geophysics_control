
## Analysis of Geophysical Acoustic Emissions

## Reproducing paper figures

There are two steps required:
* Run the setup_control_analysis.m file, or manually add the folders to your MATLAB path.
* Go to /src/ControlProject.m and change the "dat_foldername" property to point to the data files.
  * In addition, "intermediate_foldername" should be updated to a relevant temporary folder

## Analyzing new data

If you are interested in analyzing new data using this method, then the core code with examples is here:

https://github.com/Charles-Fieseler/Learning_Control_Signals_MATLAB

## Overview of code structure

### src/
This folder includes the source code, which is split up into four folders:

* src/data
  * Source code for analysis of the data (paper_control_analysis.m) and for structuring a project (ControlProject.m)
  * Classical (non-control) analysis is in the file: paper_fft_analysis.m
  * These are organized to be run in sections marked with "%%", and will give an error if run directly
  * These will plot some examples, but NOT the paper figures
  * The main output of this section is intermediate products; See src/plot
* src/explore
  * Additional files similar to src/data, but not included in the paper 
* src/plot
  * Scripts for producing the paper figures (paper_plots.m), plus helper functions
  * This is organized to be run in sections marked with "%%", and will give an error if run directly
  * Note that additional formatting was applied after output by MATLAB to achieve the final paper version
* src/util
  * Additional utility functions

### dat/

Contains raw .csv files used to produce the intermediate files.
Each subfolder should have a properly set up path in ControlProject.m

#### Note on filtering outliers

The "Localized" folder contains a copy "Localized_filtered"
This folder only contains time series with maximum activity (amplitude) above a hard threshold, and is a subset of "Localized"
In the paper the filter threshold was set to 0.15, which was found to be approximately the noise floor of the sensors.
In other words, time series with no discernable events above noise were removed.

### intermediate/

Contains intermediate products produced by src/data scripts and needed by paper_plots.m

There are 3 types of files:

1. *_acc.mat - These contain reconstruction accuracies for each of the sample times as calculated by the main algorithm in the paper
2. *_all_raw_data.mat - These contain the original time series corresponding to the above files
3. spectrogram_*.mat - These contain the frequencies and relevant information for the FFT (classical analysis) portions

## Reproducing paper figures

All figures are generated by the script paper_plots.m

This script requires intermediate products to be produced by the paper_control_analysis.m and paper_fft_analysis.m scripts.
These intermediate products are included, but can be regenerated from raw data as obtained from the DOI listed in the paper.
